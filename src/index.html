<!DOCTYPE html>
<html>
    <head>
        <title>Atari Riff Machine</title>
        <meta charset="utf-8" />
    </head>
    <body>
        <h1>Atari Riff Machine</h1>

        <details open>
            <summary>Introduction</summary>
            <p>
                The atari-riff-machine is a semi-serious, semi-fun tool to let Atari 2600 programmers generate simple
                looping music.
            </p>
            <p>
                Specifically, while the loops you can lay out here are played back in the browser as samples, they
                follow the restrictions of the real hardware (2 channels each playing one kind of tone at once.) The
                loops set up can then be used to generate ready-to-run batari Basic code.
            </p>
            <p>
                You can also play around with
                <a href="https://alienbill.com/2600/atari-sound-forger/">atari-sound-forger</a> - it maps the Atari
                sounds to the keyboard and can record and play back in the browser or as batari Basic code.
            </p></details
        >

        <details>
            <summary>About Sounds on the Atari 2600</summary>
            <p>
                Music on the Atari is famously a little weird - two tones at once, each one set to one of 10 or so
                different "distortions". The frequencies used to make different pitches are based on very simple
                division, so if you're trying to make notes instead of sound effects, you will have trouble matching
                pitches of other instruments exactly.
            </p>
            <p>
                The Atari updates the screen at 60 frames a second (50 in Europe - some North American bias has snuck in
                I'm afraid) and every frame you can adjust the volume (loudness), frequency (pitch), and distortion
                (kind of sound). You can get more complicated sounds by thinking in terms of "envelopes" - i.e. a note
                is struck, is possibly sustained, and then quickly gets quieter. There are more advanced techniques
                (like quickly alternating between two different voices) that are possible in the atari-riff-machine but
                are not particularly well supported for now.
            </p>
            <p>
                I go into more details in <a href="https://alienbill.com/2600/basic/music/">do re bB</a>
                and Random Terrain's
                <a href="https://www.randomterrain.com/atari-2600-memories-music-and-sound.html"
                    >Atari 2600 Music and Sound Page</a
                >
                has some deeper dives by Glenn Saunders and Eckhard Stolberg. (Random Terrain also generously permitted
                use of the Atari 2600 sounds he recorded and of the Basic music engine he collaborated on.) Also, Paul Slocum's
                <a href="http://www.qotile.net/files/2600_music_guide.txt"
                    >Atari 2600 Music And Sound Programming Guide</a
                >
                is worth checking out.
            </p></details
        >
        <details>
            <summary>Using This Program</summary>
            <p>
                Each Channel has its own little grid/canvas. You can select the set of sounds (group by distortions) in the
                select box atop each. (If you change sound sets, you will still see sound rows you put down notes for
                from the previous voice, but the row positions might be switched around3.) Each row shows the distortion (in bold) and the frequency. For some notes 
                to the left of those values will be a music note that distortion/frquency is most near.
            </p>
            <p>
                A blue highlight shows you where the note will start if you click, the red highlight lines up the 
                distortion/frequency. 
            </p>
            <p>
                Under each grid are settings for:
                <ul>
                    <li> mode  -to place a note, erase a note, or just play the sound without drawing or
                erasing)
                <li>alignment  -  if notes should be forced to line up to the beat, or if they should be "quantized"
                and forced to line up to quarter notes, eight notes, etc - a ghost column on the canvas shows you 
                where each note will be placed. You can have some fun "scribbling around" in free hand, but if 
                you are making more traditional music, a quantized alignment might work better.
                <li>envelope - the shape of the note you will be placing on the canvas the height of each shape represents the volume of the note and its width represents its 
                    duration.  
                    <li>loop length (how many beats before repeating) and BPM. Playback in browser 
                        will always assume 60 Frames Per Second. At 120 BPM, one beat will take up 30 frames. 

                </ul>
            </p>
            <p>
                Above both grids is a simple Playback button to hear your creation.
                The grids aren't very smart about picking up changes in real time.
            <p>
                Under both grids is the option to dump the data as batari Basic code. 
                The code isn't terribly efficent (contributions welcome- actually warning, I feel like
                there might be something incorrect and two passages will eventually get out of synch?) 
                Each change in volume, distortion, frequency for each voice adds a new 4-tuple of data,
                (the 4th value being the duration to be loaded into a countdown timer until the next change.)
                If you only have notes at a fixed volume or with a specific distortion, you could make your own
                more efficient system.
            </p>

            <p>
                (I recommend the "Atari Dev Studio" plugin for Visual Studio Code, if you are on a 
                Mac or just appreciate simple one-stop-shopping, clean editors - it embeds 
                the compiler and emulator and allows for one-click running of your batari program.)
            </p>

            <p>
                This program was made in React. In retrospect,
                that may have been a mistake - React doesn't play super-well with the timers and intervals
                I used to recreate the timing, and I think I should have had a single 
                app controlling both grids' worth of data. That's some of why I stalled out and didn't incorporate
                some of the ideas for more keyboard recording/quantization in it.
            </p>
            <p>
                Other improvements might include making a UI for doing "chords", one channel quickly alternating 
                between frequencies. Also a UI for saving and loading. As usual, I thrive on feedback and attention,
                so if you make your pitch and it doesn't seem like too much work I might be inclined... or 
                if you know how to code, help out yourself! You can fork
                <a href="https://github.com/kirkjerk/atari-riff-machine">github.com/kirkjerk/atari-riff-machine</a>.
            </p>
        </details>
        <div id="app"></div>
        <script src="index.js"></script>
    </body>
</html>
